"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),a=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("prismjs");require("prismjs/components/prism-jsx");var r=["video","image","embed","figma"],l=function(e){var a=e.block,n=e.mapImageUrl,l=a.value,o=a.value.type;if(!r.includes(o))return null;var i=l.format,c=null!=i?i:{},s=c.display_source,m=c.block_aspect_ratio,u=void 0===m?void 0:m,p=c.block_height,v=c.block_width,d=u||(void 0===p?1:p)/(void 0===v?1:v);if("embed"===o||"video"===o||"figma"===o)return t.createElement("div",{style:{paddingBottom:100*d+"%",position:"relative"}},t.createElement("iframe",{className:"notion-image-inset",src:"figma"===o?l.properties.source[0][0]:void 0===s?void 0:s}));if("image"===a.value.type){var g,f=n(l.properties.source[0][0],a),E=null===(g=l.properties.caption)||void 0===g?void 0:g[0][0];return u?t.createElement("div",{style:{paddingBottom:100*d+"%",position:"relative"}},t.createElement("img",{className:"notion-image-inset",alt:E||"notion image",src:f})):t.createElement("img",{alt:E,src:f})}return null},o=function(e){var a=e.code,r=e.language,l=void 0===r?"javascript":r,o=l.toLowerCase(),i=n.languages[o]||n.languages.javascript,c="language-"+l.toLowerCase();return t.createElement("pre",{className:"notion-code "+c},t.createElement("code",{className:c,dangerouslySetInnerHTML:{__html:n.highlight(a,i,l)}}))},i=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return!!e})).join(" ")},c=function(e){return e.reduce((function(e,t){return e+t[0]}),"")},s=function(e,t){var a=function(e){var t=[],a=void 0,n=-1;return Object.keys(e).forEach((function(r){var l;null===(l=e[r].value.content)||void 0===l||l.forEach((function(r){var l,o,i=null===(l=e[r])||void 0===l||null===(o=l.value)||void 0===o?void 0:o.type;i&&i!==a&&(n++,a=i,t[n]=[]),t[n].push(r)})),a=void 0})),t}(t).find((function(t){return t.includes(e)}));if(a)return a.indexOf(e)+1},m=function(e,t){void 0===e&&(e="");var a=new URL("https://www.notion.so"+(e.startsWith("/image")?e:"/image/"+encodeURIComponent(e)));return t&&!e.includes("/images/page-cover/")&&(a.searchParams.set("table","space"===t.value.parent_table?"block":t.value.parent_table),a.searchParams.set("id",t.value.id),a.searchParams.set("cache","v2")),a.toString()},u=function(e){return void 0===e&&(e=""),"/"+e.replace(/-/g,"")},p=function(e){var a,n,r,l=e.block,o=e.className,s=e.big,m=e.mapImageUrl;if("page"!==(r=l.value).type&&"callout"!==r.type)return null;var u=null===(a=l.value.format)||void 0===a?void 0:a.page_icon,p=null===(n=l.value.properties)||void 0===n?void 0:n.title;if(null==u?void 0:u.includes("http")){var v=m(u,l);return t.createElement("img",{className:i(o,s?"notion-page-icon-cover":"notion-page-icon"),src:v,alt:p?c(p):"Icon"})}return t.createElement("span",{className:i(o,"notion-emoji",s?"notion-page-icon-cover":"notion-page-icon"),role:"img","aria-label":u},u)},v=function(e){var a=e.blockMap,n=e.mapPageUrl,r=e.mapImageUrl,l=Object.keys(a)[0];if(!l)return null;for(var o=[],i=l;;){var c,s,m=a[i];if(!m||!m.value)break;var u=null===(c=m.value.properties)||void 0===c?void 0:c.title[0][0],v=null===(s=m.value.format)||void 0===s?void 0:s.page_icon;if(!u&&!v)break;o.push({block:m,active:i===l,pageId:i,title:u,icon:v});var d=m.value.parent_id;if(!d)break;i=d}return o.reverse(),t.createElement("header",{className:"notion-page-header"},t.createElement("div",{className:"notion-nav-breadcrumbs"},o.map((function(e,a){return t.createElement(t.Fragment,{key:e.pageId},t.createElement("a",{className:"notion-nav-breadcrumb "+(e.active?"notion-nav-breadcrumb-active":""),href:e.active?void 0:n(e.pageId)},e.icon&&t.createElement(p,{className:"notion-nav-icon",block:e.block,mapImageUrl:r}),e.title&&t.createElement("span",{className:"notion-nav-title"},e.title)),a<o.length-1&&t.createElement("span",{className:"notion-nav-spacer"},"/"))}))))},d=function(e){return function(a){return null==a?void 0:a.map((function(a,n){var r=a[0],l=a[1];return l?l.reduceRight((function(a,l){var o=function(){switch(l[0]){case"h":return t.createElement("span",{key:n,className:"notion-"+l[1]},a);case"c":return t.createElement("code",{key:n,className:"notion-inline-code"},a);case"b":return t.createElement("b",{key:n},a);case"i":return t.createElement("em",{key:n},a);case"s":return t.createElement("s",{key:n},a);case"a":return t.createElement("a",{className:"notion-link",href:l[1],key:n},a);default:return t.createElement(t.Fragment,{key:n},a)}},i=null==e?void 0:e[l[0]];return i?t.createElement(i,Object.assign({key:n},l[1]?{decoratorValue:l[1]}:{},{renderComponent:o}),r):o()}),t.createElement(t.Fragment,null,r)):t.createElement(t.Fragment,{key:n},r)}))}},g=function(e){var a=e.block,n=e.children,r=e.level,m=e.fullPage,u=e.hideHeader,g=e.blockMap,f=e.mapPageUrl,E=e.mapImageUrl,b=e.customBlockComponents,k=e.customDecoratorComponents,h=null==a?void 0:a.value,N=function(){var e,b,N,y,_,U,I,x,w,j,P,O=d(k);switch(null==h?void 0:h.type){case"page":if(0===r){if(m){if(!h.properties)return null;var C=h.format||{},M=C.page_icon,F=C.page_cover,q=C.page_full_width,L=C.page_small_text,R=100*(1-(C.page_cover_position||.5));return t.createElement("div",{className:"notion"},!u&&t.createElement(v,{blockMap:g,mapPageUrl:f,mapImageUrl:E}),F&&t.createElement("img",{src:E(F,a),alt:c(h.properties.title),className:"notion-page-cover",style:{objectPosition:"center "+R+"%"}}),t.createElement("main",{className:i("notion-page",!F&&"notion-page-offset",q&&"notion-full-width",L&&"notion-small-text")},M&&t.createElement(p,{className:F?"notion-page-icon-offset":void 0,block:a,big:!0,mapImageUrl:E}),t.createElement("div",{className:"notion-title"},O(h.properties.title)),n))}return t.createElement("main",{className:"notion"},n)}return h.properties?t.createElement("a",{className:"notion-page-link",href:f(h.id)},h.format&&t.createElement("div",{className:"notion-page-icon"},t.createElement(p,{block:a,mapImageUrl:E})),t.createElement("div",{className:"notion-page-text"},O(h.properties.title))):null;case"header":return h.properties?t.createElement("h1",{className:"notion-h1"},O(h.properties.title)):null;case"sub_header":return h.properties?t.createElement("h2",{className:"notion-h2"},O(h.properties.title)):null;case"sub_sub_header":return h.properties?t.createElement("h3",{className:"notion-h3"},O(h.properties.title)):null;case"divider":return t.createElement("hr",{className:"notion-hr"});case"text":if(!h.properties)return t.createElement("div",{className:"notion-blank"},"Â ");var B=null===(e=h.format)||void 0===e?void 0:e.block_color;return t.createElement("p",{className:i("notion-text",B&&"notion-"+B)},O(h.properties.title));case"bulleted_list":case"numbered_list":var T,W=function(e,a){return"bulleted_list"===h.type?t.createElement("ul",{className:"notion-list notion-list-disc"},e):t.createElement("ol",{start:a,className:"notion-list notion-list-numbered"},e)};T=h.content?t.createElement(t.Fragment,null,h.properties&&t.createElement("li",null,O(h.properties.title)),W(n)):h.properties?t.createElement("li",null,O(h.properties.title)):null;var H=a.value.type!==g[a.value.parent_id].value.type,S=s(h.id,g);return H?W(T,S):T;case"image":case"embed":case"figma":case"video":var V=a.value;return t.createElement("figure",{className:"notion-asset-wrapper",style:void 0!==V.format?{width:V.format.block_width}:void 0},t.createElement(l,{block:a,mapImageUrl:E}),V.properties.caption&&t.createElement("figcaption",{className:"notion-image-caption"},O(V.properties.caption)));case"code":if(h.properties.title)return t.createElement(o,{key:h.id,language:h.properties.language[0][0]||"",code:h.properties.title[0][0]});break;case"column_list":return t.createElement("div",{className:"notion-row"},n);case"column":var A=h.format.column_ratio,D=Number((1/A).toFixed(0));return t.createElement(t.Fragment,null,t.createElement("div",{className:"notion-column",style:{width:"calc((100% - "+46*(D-1)+"px) * "+A+")"}},n),t.createElement("div",{className:"notion-spacer",style:{width:46}}));case"quote":return h.properties?t.createElement("blockquote",{className:"notion-quote"},O(h.properties.title)):null;case"collection_view":if(!a)return null;var z=null==a||null===(b=a.collection)||void 0===b?void 0:b.types[0];return t.createElement("div",null,t.createElement("h3",{className:"notion-h3"},O(null===(N=a.collection)||void 0===N?void 0:N.title)),"table"===(null==z?void 0:z.type)&&t.createElement("div",{style:{maxWidth:"100%",marginTop:5}},t.createElement("table",{className:"notion-table"},t.createElement("thead",null,t.createElement("tr",{className:"notion-tr"},null===(y=z.format)||void 0===y||null===(_=y.table_properties)||void 0===_?void 0:_.filter((function(e){return e.visible})).map((function(e,n){var r,l;return t.createElement("th",{className:"notion-th",key:n,style:{minWidth:e.width}},null===(r=a.collection)||void 0===r||null===(l=r.schema[e.property])||void 0===l?void 0:l.name)})))),t.createElement("tbody",null,null==a||null===(U=a.collection)||void 0===U?void 0:U.data.map((function(e,n){var r,l;return t.createElement("tr",{className:"notion-tr",key:n},null===(r=z.format)||void 0===r||null===(l=r.table_properties)||void 0===l?void 0:l.filter((function(e){return e.visible})).map((function(n,r){var l,o;return t.createElement("td",{key:r,className:"notion-td "+("title"===n.property?"notion-bold":"")},O(e[null===(l=a.collection)||void 0===l||null===(o=l.schema[n.property])||void 0===o?void 0:o.name]))})))}))))),"gallery"===(null==z?void 0:z.type)&&t.createElement("div",{className:"notion-gallery"},null===(I=a.collection)||void 0===I?void 0:I.data.map((function(e,n){var r,l;return t.createElement("div",{key:"col-"+n,className:"notion-gallery-card"},t.createElement("div",{className:"notion-gallery-content"},null===(r=z.format)||void 0===r||null===(l=r.gallery_properties)||void 0===l?void 0:l.filter((function(e){return e.visible})).map((function(n,r){var l;return t.createElement("p",{key:r+"item",className:"notion-gallery-data "+(0===r?"is-first":"")},c(e[null===(l=a.collection)||void 0===l?void 0:l.schema[n.property].name]))}))))}))));case"callout":return t.createElement("div",{className:i("notion-callout",h.format.block_color&&"notion-"+h.format.block_color,h.format.block_color&&"notion-"+h.format.block_color+"_co")},t.createElement("div",null,t.createElement(p,{block:a,mapImageUrl:E})),t.createElement("div",{className:"notion-callout-text"},O(h.properties.title)));case"bookmark":var G=h.properties.link,J=null!==(x=h.properties.title)&&void 0!==x?x:G,K=h.properties.description,Q=null===(w=h.format)||void 0===w?void 0:w.block_color,X=null===(j=h.format)||void 0===j?void 0:j.bookmark_icon,Y=null===(P=h.format)||void 0===P?void 0:P.bookmark_cover;return t.createElement("div",{className:"notion-row"},t.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:i("notion-bookmark",Q&&"notion-"+Q),href:G[0][0]},t.createElement("div",null,t.createElement("div",{className:"notion-bookmark-title"},O(J)),K&&t.createElement("div",{className:"notion-bookmark-description"},O(K)),t.createElement("div",{className:"notion-bookmark-link"},X&&t.createElement("img",{src:X,alt:c(J)}),t.createElement("div",null,O(G)))),Y&&t.createElement("div",{className:"notion-bookmark-image"},t.createElement("img",{src:Y,alt:c(J)}))));case"toggle":return t.createElement("details",{className:"notion-toggle"},t.createElement("summary",null,O(h.properties.title)),t.createElement("div",null,n));default:return t.createElement("div",null)}return null};return b&&b[null==h?void 0:h.type]&&0!==r?t.createElement(b[null==h?void 0:h.type],{renderComponent:N,blockMap:g,blockValue:h,level:r},n):N()};exports.Block=g,exports.NotionRenderer=function e(t){var n,r,l=t.level,o=void 0===l?0:l,i=t.currentId,c=t.mapPageUrl,s=void 0===c?u:c,p=t.mapImageUrl,v=void 0===p?m:p,d=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t.indexOf(a=l[n])>=0||(r[a]=e[a]);return r}(t,["level","currentId","mapPageUrl","mapImageUrl"]),f=d.blockMap,E=i||Object.keys(f)[0],b=f[E];return b?a.createElement(g,Object.assign({key:E,level:o,block:b,mapPageUrl:s,mapImageUrl:v},d),null==b||null===(n=b.value)||void 0===n||null===(r=n.content)||void 0===r?void 0:r.map((function(t){return a.createElement(e,Object.assign({key:t,currentId:t,level:o+1,mapPageUrl:s,mapImageUrl:v},d))}))):null},exports.classNames=i,exports.createRenderChildText=d,exports.defaultMapImageUrl=m,exports.defaultMapPageUrl=u,exports.getListNumber=s,exports.getTextContent=c;
//# sourceMappingURL=react-notion.cjs.production.min.js.map
